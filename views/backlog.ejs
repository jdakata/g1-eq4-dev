<!DOCTYPE html>
<html lang="en">

<head>
    <%- include('head.ejs') %>
    <link rel="stylesheet" type="text/css" href="/stylesheets/backlog.css">
</head>

<body>

<div class="container">

    <%- include('navigation.ejs') %>

    <div class="mt-3">
        <button class="btn btn-primary" onclick="showPopup('#add-sprint')">Nouveau sprint</button>
        <button class="btn btn-success" onclick="showPopup('#add-user-story')">Nouvelle US</button>

        <div class="pop-up-wrapper">
            <div class="pop-up" id="add-sprint">
                <%- include('new-sprint.ejs', { projectId: projectId }); %>
            </div>
            <div class="pop-up" id="add-user-story">
                <%- include('new-user-story.ejs', { projectId: projectId }); %>
            </div>
        </div>

        <% let i = 0;
        backlog.sprints.forEach(function(sprint) { %>
            <h2>Sprint <%- ++i %></h2>
            <div class="row">
                <%- include('sprint.ejs', {sprint : sprint}) %>
            </div>
        <% }); %>

        <h2>Backlog</h2>
        <% backlog.backlog.USList.forEach(function(US) { %>
            <div class="user-story border row m-0">
                <span class="col-1">#<%= US.id %></span>
                <span class="description col-9"><%= US.description %></span>
                <span class="col-1 text-center"><span class="badge-pill badge-info"><%= US.difficulty %></span></span>
                <span class="col-1 text-right us-more" onclick="alert('click')"><i class="fas fa-ellipsis-v"></i></span>
            </div>
        <% }); %>
    </div>

</div>

<footer>
    <%- include('footer.ejs') %>
</footer>

</body>

</html>
